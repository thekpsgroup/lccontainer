---
export interface FAQItem {
  question: string;
  answer: string;
}

export interface Props {
  faqs: FAQItem[];
}

const { faqs } = Astro.props;

const schema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: faqs.map((faq) => ({
    "@type": "Question",
    name: faq.question,
    acceptedAnswer: {
      "@type": "Answer",
      text: faq.answer,
    },
  })),
};
---

<script type="application/ld+json" set:html={JSON.stringify(schema)} />

<section class="faq-section py-8 px-4 max-w-4xl mx-auto">
  <h2 class="text-2xl font-bold mb-6 text-gray-900">
    Frequently Asked Questions
  </h2>
  <div class="space-y-4">
    {
      faqs.map((faq, index) => (
        <details
          class="border border-gray-200 rounded-lg p-4 hover:border-blue-500 transition-colors group"
          open={index === 0}
        >
          <summary class="font-semibold cursor-pointer text-lg text-gray-900 hover:text-blue-600 flex justify-between items-center">
            {faq.question}
            <span class="ml-2 text-gray-400 group-open:rotate-180 transition-transform">
              â–¼
            </span>
          </summary>
          <p class="mt-3 text-gray-700 leading-relaxed">{faq.answer}</p>
        </details>
      ))
    }
  </div>
</section>

<style>
  details summary::-webkit-details-marker {
    display: none;
  }

  details[open] summary {
    margin-bottom: 0.75rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #e5e7eb;
  }
</style>
